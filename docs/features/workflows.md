# Workflow Management

The Workflow Management system in MultiAgentConsole allows you to create, save, and execute automated sequences of actions.

## Overview

Workflows enable you to:

- Automate repetitive tasks
- Chain together multiple actions
- Process inputs through a sequence of steps
- Save and reuse common sequences
- Share workflows with others
- Schedule workflow execution

## Getting Started

### Accessing Workflow Management

1. Click the "Workflows" tab in the navigation bar
2. The workflow interface has three main sections:
   - Workflow List: Shows your saved workflows
   - Workflow Editor: Where you create and edit workflows
   - Workflow Execution: Where you run workflows and see results

### Creating a Simple Workflow

1. Click the "New Workflow" button
2. Give your workflow a name and description
3. Add steps to your workflow using the "Add Step" button
4. Configure each step with the required parameters
5. Save your workflow using the "Save" button

## Workflow Components

### Steps

Steps are the building blocks of workflows. Each step performs a specific action and can pass its output to subsequent steps.

#### Step Types

- **Chat**: Send a message to an AI agent and receive a response
- **Tool**: Execute a tool with specific parameters
- **Condition**: Branch the workflow based on conditions
- **Loop**: Repeat a sequence of steps
- **Input**: Request input from the user
- **Output**: Display output to the user
- **Graph**: Visualize data or relationships
- **Code**: Execute custom code
- **HTTP**: Make HTTP requests to external services

### Variables

Workflows can use variables to store and pass data between steps:

- **Input Variables**: Values provided when the workflow starts
- **Step Variables**: Values generated by steps during execution
- **Global Variables**: Values accessible across all workflows
- **Environment Variables**: System or configuration values

To use a variable in a step parameter, use the `${variable_name}` syntax.

### Triggers

Workflows can be triggered in various ways:

- **Manual**: Started by the user through the interface
- **Scheduled**: Run at specific times or intervals
- **Event**: Triggered by specific events in the system
- **API**: Started through the API
- **Chat Command**: Initiated from the chat interface

## Creating Workflows

### Workflow Editor

The workflow editor provides a visual interface for creating and editing workflows:

1. **Canvas**: The main area where you arrange and connect steps
2. **Toolbox**: Contains available step types you can add to the workflow
3. **Properties Panel**: Shows properties of the selected step
4. **Variables Panel**: Manages workflow variables

### Adding Steps

To add a step to your workflow:

1. Drag a step type from the toolbox to the canvas
2. Configure the step properties in the properties panel
3. Connect the step to other steps by dragging from the output connector to the input connector of another step

### Configuring Steps

Each step type has specific configuration options:

#### Chat Step

- **Model**: The AI model to use
- **Message**: The message to send to the AI
- **System Prompt**: Optional context for the AI
- **Output Variable**: Where to store the AI's response

Example:

```json
{
  "type": "chat",
  "model": "gpt-4",
  "message": "Summarize the following text: ${input_text}",
  "system_prompt": "You are a summarization expert. Be concise and accurate.",
  "output_variable": "summary"
}
```

#### Tool Step

- **Tool**: The tool to execute
- **Parameters**: Tool-specific parameters
- **Output Variable**: Where to store the tool's output

Example:

```json
{
  "type": "tool",
  "tool": "search",
  "parameters": {
    "query": "${search_query}",
    "num_results": 5
  },
  "output_variable": "search_results"
}
```

#### Condition Step

- **Condition**: The condition to evaluate
- **True Branch**: Steps to execute if the condition is true
- **False Branch**: Steps to execute if the condition is false

Example:

```json
{
  "type": "condition",
  "condition": "${temperature} > 30",
  "true_branch": [
    {
      "type": "output",
      "message": "It's hot today!"
    }
  ],
  "false_branch": [
    {
      "type": "output",
      "message": "The temperature is normal or cold."
    }
  ]
}
```

### Saving and Managing Workflows

After creating a workflow:

1. Click the "Save" button to save your workflow
2. Your workflow will appear in the Workflow List
3. You can edit, duplicate, delete, or export workflows from the list

## Executing Workflows

### Running a Workflow

To run a workflow:

1. Select the workflow from the Workflow List
2. Click the "Run" button
3. If the workflow requires input variables, you'll be prompted to provide them
4. The workflow will execute, and you can see the progress and results in the Workflow Execution panel

### Monitoring Execution

During execution, you can:

- See the current step being executed
- View the values of variables
- Pause or stop the execution
- See logs and error messages

### Workflow Results

After execution completes:

- The final output is displayed in the Workflow Execution panel
- You can save the results for later reference
- You can share the results with others

## Advanced Features

### Workflow Templates

MultiAgentConsole provides pre-built workflow templates for common tasks:

- **Data Analysis**: Analyze and visualize data
- **Content Creation**: Generate and refine content
- **Research**: Gather and synthesize information
- **Decision Making**: Evaluate options and make recommendations

To use a template:

1. Click "New from Template" in the Workflow List
2. Select a template from the list
3. Customize the template as needed
4. Save it as a new workflow

### Workflow Sharing

You can share workflows with other users:

1. Select a workflow from the Workflow List
2. Click the "Share" button
3. Choose sharing options (view-only, editable, etc.)
4. Generate a sharing link or select specific users

### Workflow Versioning

MultiAgentConsole keeps track of workflow versions:

1. Each time you save a workflow, a new version is created
2. You can view and restore previous versions
3. You can compare versions to see what changed

### Workflow Analytics

Track workflow performance and usage:

1. Execution time and resource usage
2. Success and failure rates
3. Most used workflows and steps
4. Common errors and bottlenecks

## Integration with Other Features

### Chat Integration

You can use workflows directly from the chat interface:

```
/workflow analyze_sentiment "I really enjoyed the movie!"
```

### API Integration

You can execute workflows programmatically using the Workflow API:

```python
import requests

# Execute a workflow
response = requests.post(
    "http://localhost:8007/api/workflows/execute/analyze_sentiment",
    json={
        "input_text": "I really enjoyed the movie!"
    },
    headers={"Authorization": "Bearer YOUR_API_KEY"}
)

# Get the results
print(response.json())
```

See the [Workflow API documentation](../api/workflows.md) for more details.

### Plugin Integration

Plugins can provide custom step types and tools for workflows:

1. Install plugins that provide workflow functionality
2. New step types will appear in the toolbox
3. You can use plugin-provided tools in Tool steps

## Best Practices

### Workflow Design

- **Start Simple**: Begin with a few steps and add complexity gradually
- **Use Clear Names**: Give workflows and steps descriptive names
- **Add Comments**: Document complex workflows for future reference
- **Test Thoroughly**: Test workflows with various inputs before relying on them
- **Handle Errors**: Add error handling for critical steps

### Performance Optimization

- **Minimize API Calls**: Combine related API calls when possible
- **Use Caching**: Cache results that don't change frequently
- **Batch Processing**: Process items in batches rather than individually
- **Parallel Execution**: Use parallel steps for independent operations

## Troubleshooting

### Common Issues

- **Execution Errors**: Check step configurations and variable references
- **Performance Issues**: Optimize complex workflows or schedule them for off-peak times
- **Missing Steps**: Ensure required plugins are installed
- **Variable Errors**: Verify that variables are defined before use

### Getting Help

If you encounter issues with workflows:

1. Check the [FAQ](../faq/features.md) for common questions
2. Visit the [Troubleshooting](../troubleshooting/workflows.md) section
3. Contact support or open an issue on GitHub
